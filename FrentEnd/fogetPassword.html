<html>
	<head>
		<title>Generate Password</title>
	</head>
	<style>
		
	</style>
	<body>
		<h1>Generate new password</h1>
		<input class="username" type="text" placeholder="Username"/></br>
		<input class="newPassword" type="password" placeholder="new Password"/></br>
		<input class="confirmPass" type="password" placeholder="confirm password"/></br>
		<button class="button">OKAY</button>
	</body>
	<script type="text/javascript">
		let resData = JSON.parse(localStorage.getItem("data"))||[];
		let button = document.querySelector(".button");
		button.onclick = function(){
		
			let temp = false;
			let username = document.querySelector(".username").value;
			
			let newPassword = document.querySelector(".newPassword").value
			
			let confirmPass = document.querySelector(".confirmPass").value;
			
			if(newPassword === confirmPass)
			{
				let arr = [];
				for(let i=0;i<resData.length;i++){
				
					if(resData[i].username === username)
					{
						temp = true
						if(resData[i].password !== newPassword)
						{
							let obj = {
								...resData[i],
								password : newPassword
							}
							arr.push(obj);
						} 
						else{
							alert("Old and new passwords are same");
							return;
						}
					}
					else{
						arr.push(resData[i]);
					}
				}
				localStorage.setItem("data",JSON.stringify(arr));
				alert("Successfully passwords are changed");
				window.location.href="login.html";
			
			}
			else{
				alert("passwords are not matching");
				return
			}
			if(!temp)alert("username doesnt exist");
		}
	
	</script>
</html>
